HANOI—Vietnam was celebrating its Lunar New Year holiday when President Donald Trump said his second summit with Kim Jong Un, the North Korean leader, would take place here. That announcement was barely three weeks ago.

At the time, much of this country was shut down, as is customary during the holiday, Tet. Officials were home visiting family, most restaurants and shops were closed, and city streets were quiet.

With little warning, that had to change. Vietnam is not unaccustomed to high-profile meetings: It hosted the 2017 Asia-Pacific Economic Cooperation summit, which brought world leaders, including Trump, to the coastal city of Da Nang, and a World Economic Forum meeting in Hanoi last year. But the relatively short notice between Trump’s announcement and the timing of the meeting, combined with the difficulties of preparing for the arrival of Kim, the famously paranoid leader of a country closed off to the world, complicated matters further.

The capital went into overdrive: Authorities ordered streets to be cleaned, construction sites to be tidied up, and Vietnamese, North Korean, and American flags to be hung from countless light poles around the city. Hanoi’s entire police force was mobilized a week before the leaders arrived to ensure advance security, as were secret police, anti-riot forces, and the military. (This, at least, wasn’t hard—Vietnam is run by a staunchly Communist government in command of a robust security apparatus.)

Kim’s unorthodox arrival, which involved taking his armored train from Pyongyang to Vietnam’s border with China and then taking a car the remaining 100 miles to Hanoi, presented a particular challenge. Dong Dang, a town unfamiliar to many Vietnamese, let alone foreigners, would welcome Kim to the country, thanks to its border train station. The tiny outpost was quickly spruced up, while soldiers were called up to guard the highway between the border and the capital, a route that was completely closed for several hours to give Kim a secure pathway.

Here in Hanoi, much of the city looked as it usually does, even once the summit began. Beyond the “DPRK-USA Hanoi Summit Viet Nam” billboards and the aforementioned flags, most neighborhoods looked little changed: Motorbikes streamed by, cafés and street-food carts did brisk business, and families ambled around the city’s many lakes.

Once you neared any of the summit-related venues, though, things were different.

The block surrounding the Meliá hotel, which hosted Kim and his security entourage, was completely closed. Members of the traveling White House press corps, who had booked the hotel for their work space and briefing rooms, were kicked out the day the North Korean leader arrived. Television crews staked out each corner, while four armored personnel carriers sat parked two blocks away. Soldiers armed with automatic weapons stood guard (they did, however, allow people to take photos with them). Roads were thrown into chaos whenever Trump or Kim was on the move, as a huge police presence appeared and blocked traffic. Curious onlookers lined streets each evening as the two leaders separately made their way to the Metropole hotel, where the talks were being held.

Fittingly, the biggest problems with the summit’s execution were related to the media: Vietnam’s press is entirely state-owned and strictly controlled, while published dissent or criticism is swiftly quelled through a sophisticated cybersecurity system. In Hanoi for the summit, journalists were largely restricted to the International Media Center, housed in an imposing, drafty modernist edifice near the city’s main train station.

The enclosure featured numerous TVs and screens to live-stream summit events, but they rarely worked, instead often running a looping video of Vietnamese tourist destinations. Journalists in attendance, including those traveling to the country for the summit, received an email from the foreign ministry’s press office reminding them to write “positive articles and reports about the meeting and about Vietnam.” The message continued: “You should follow the applied schedule and should not collect, write or distributes [sic] news of any irrelevant or ‘sensitive’ topics.” (The minister of information and communications had told members of the media before the summit to think of his staff as “family members.”)

The Vietnamese leadership, eager to be seen internationally as a serious player in global affairs, took no chances. Two Kim impersonators, one from Australia and another from Thailand, were deported soon after making public appearances in Hanoi, while a Trump impersonator from Canada was told to remain in his hotel. Domestic dissidents who criticize the government’s dismal human-rights record were placed under de facto house arrest or followed as they went about their daily routine.

But while the summit may have landed with a thud in terms of policy, Vietnam got the image it wanted: Trump standing alongside Prime Minister Nguyen Xuan Phuc, the American president waving a Vietnamese flag, and the Vietnamese premier waving an American flag.