PARIS—French President Emmanuel Macron and Matteo Salvini, Italy’s deputy prime minister and interior minister, are from the same generation, but more than the Alps divides them.

Macron always wears a suit and tie, and has a penchant for lofty rhetoric and formal ceremonies. Salvini likes sweatshirts that say Italia, rails against illegal immigration, and tweets pictures of himself eating Nutella. The differences go beyond style. Their dueling visions for the future of Europe will be tested in elections for the European Parliament this week.

The Parliament has limited powers and the vote, to be held across the bloc’s 28 countries May 23–26, is generally seen as a test of voter sentiment across member states. But this time more than ever—after Brexit and with Trump rattling the transatlantic alliance—it’s also a test of which Europe will prevail: Macron’s call for a more top-down union that shares responsibilities for borders, defense, and the environment, and maybe more; or Salvini’s euroskeptic one, a “Europe of nations” in which each country retains more sovereignty.

“Political-party competition in the EU and its member states is organized increasingly around a liberal-cosmopolitan internationalist versus conservative-populist nationalist cleavage,” Douglas Webber, a political scientist at France’s INSEAD business school, told me. The far-right parties will do better than ever before, he added, but “it will not turn the whole EU on its head” because the majority in the Parliament is still expected to be pro-European.

At a rally of far-right parties from across Europe in Milan on Saturday, Salvini put Macron in the same group as German Chancellor Angela Merkel, European Commission President Jean-Claude Juncker, and the financier George Soros—“elites” who had “betrayed” the continent and “occupied it in the name of multinationals and out-of-control immigration.”

That rhetoric stands in stark contrast to Macron’s. In March, the French leader published an open letter to the citizens of Europe in which he said Brexit was bad and called for a conference to map out the future of the union and to strengthen the borders of the Schengen visa-free travel area. “Freedom, protection and progress: we need to build European renewal on these pillars,” he wrote. “We can’t let nationalists with no solutions exploit people’s anger. We can’t sleepwalk to a diminished Europe. We can’t remain in the routine of business as usual and wishful thinking.”

Since coming to power a year ago in Italy’s first populist government, a coalition between the far-right League and the antiestablishment Five Star Movement, Salvini, even while interior minister, has been campaigning relentlessly against what he calls a Europe of “bureaucrats, do-gooders, and bankers.” In his rhetoric, the European Union—and the euro, shared by Italy and 18 other EU members—is an emasculating force that renders countries less potent, and he thinks nation-states should push back. When it comes to immigration, he has blocked Italian ports, preventing NGO boats that have rescued migrants at sea from docking.

Last month in Milan, Salvini joined with other far-right parties, including Germany’s Alternative for Germany, the Finns Party, and the Danish People’s Party, to introduce an alliance for “a common-sense Europe”—calling for more national powers to block immigrants and fight against Islamic terrorism. Austria’s far-right Freedom Party is also on board, though it is facing controversy after a secretly filmed video showed a senior party official who serves as the country’s vice chancellor offering government contracts in exchange for Russian money. The party was the junior member of Chancellor Sebastian Kurz’s governing coalition, though since the video surfaced, the vice chancellor has resigned and Kurz has triggered snap elections that will be held this fall.

The Dutch politician Geert Wilders has also joined Salvini’s alliance, as have a far-right Estonian party and Marine Le Pen’s National Rally, which lately has been polling slightly higher than Macron’s La République en Marche in French projections.

These parties had previously been divided across other alliances in the European Parliament, and if they align, some polls show the new far-right grouping could gain enough seats to become a significant force in the legislature, capable of nominating commissioners and revising laws. The largest bloc is expected to be the European People’s Party, a conservative grouping that has held the majority in the European Parliament since 1999. (The Financial Times has a handy graphic on the alphabet soup.)

The EPP, which includes Merkel’s party, recently sanctioned one of its members, Viktor Orbán’s Fidesz, after it ran a campaign of anti-immigration posters in Hungary, including ones against Soros. Salvini has also targeted Soros in speeches and has been more effusive about Orbán than he has about Merkel. And many Italian voters, not only on the far right, associate the euro with German-dominated Europe. (At Saturday’s rally, Salvini called on voters to oust “the left” in the European elections, even though conservatives have long been that Parliament’s dominant force.)

If the Conservatives and the socialist bloc can’t form a majority, then Macron, whose party is part of a liberal grouping, can play kingmaker. “Beyond a national leader, he’s portraying himself as a European leader of the Europeanist front,” Nathalie Tocci, the director of Italy’s Istituto di Affari Esteri, told me.

Macron’s strategy for the European elections is a list of candidates from his own party as well as from the center right and Greens. But the campaign has struggled to gain attention in France, where “yellow vest” protesters have been demonstrating against the rising cost of living and calling for his resignation. Not surprisingly, Le Pen’s campaign is focused on making the European elections a referendum on Macron.

In Italy, Salvini’s social-media blitz and relentless anti-immigrant rhetoric have made the League the most popular party in Italy, polling at 30 percent, above its senior partner in the governing coalition, the antiestablishment Five Star Movement. If the League strongly outperforms the Five Star Movement, Salvini might pull the plug on the government in Rome and push for early national elections, which could make him prime minister.

Of course, the Macron-Salvini divide is not completely straightforward. For one, national governments—especially Germany and France—basically already do shape European policy. And the European Parliament can be toothless. No one has pushed its limits better than Orbán, whose country received billions in EU largesse while his government was scaling back the independence of the media and passing laws cracking down on foreign NGOs.

But in the run-up to the European elections, the French president has been a convenient target for Salvini, to the point that relations between Italy and France hit a postwar low. Salvini’s constant attacks on Macron have been coupled with a surprise visit by Luigi di Maio, the leader of the Five Star Movement, to France to meet with some of the yellow-vest protesters who have been holding weekly, often violent, demonstrations since November. In response, France recalled its ambassador from Rome. (He later returned.)

Macron went on Italian state television and downplayed the tensions as a “misunderstanding.” After all, staying outraged would only play into Salvini’s hand. In his TV interview, Macron asked why there was so much fear in Italy today, and expressed how much he loved the country. He also conceded—a little too little, a little too late—that Europe hadn’t helped Italy handle the hundreds of thousands of immigrants who had arrived in the country since 2014, far more than ever arrived in France. (Macron’s style is more polished than Salvini’s, but France also tightly controls its border and has blocked migrants from crossing from Italy into France.)

The next day, Salvini was asked if he’d seen Macron’s interview, at a press conference where he was touting a bill to make it easier for Italians to shoot intruders in self-defense. No, he replied, he had watched a soccer game, “and that was the right thing to do.”

Italy’s president, Sergio Mattarella, helped ease the tensions, visiting Paris to mark the 500th anniversary of the death of Leonardo da Vinci by placing flowers on his tomb outside Paris. The same day he was there, though, Salvini was in Hungary, going with Orbán to see Hungary’s border with Serbia, where Hungary pushed back migrants after they arrived in 2015. Salvini tweeted a selfie of himself with Orbán.

Both Macron and Salvini are savvy about the internet, to different ends. Since being elected France’s youngest president ever in 2017, Macron has been touting France as a haven for tech companies. Last week he hosted New Zealand’s prime minister, Jacinda Ardern, and other world leaders to sign the Christchurch Call, a heartfelt if vague demand for tech companies to rein in terrorist and extremist violence online. It was in response to the attack in March in which a gunman opened fire on two mosques in Christchurch, New Zealand, killing dozens, and filmed the attack on Facebook Live. In response to the Christchurch Call, Facebook said it would restrict its Live feature under some circumstances.

Salvini is ubiquitous on Facebook Live, posting his every public appearance and also addressing voters directly with long selfie videos. His Facebook page has more engagement than Donald Trump’s, according to CrowdTangle, a Facebook-owned analytics tool. This month Salvini reintroduced an online game that he had debuted before the Italian elections last year, in which anyone who likes his posts on Facebook, Twitter, or Instagram earns points, and those with the most points can compete to have him post a photo of them on his social-media channels. He introduced the game in a video that ended with a plug reminding people to vote in the European elections, using his motto, “Italy First: Common-Sense Europe.”